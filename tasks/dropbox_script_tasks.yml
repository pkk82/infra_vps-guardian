- name: Ensure pip is installed
  ansible.builtin.apt:
    name: python3-pip
    state: present
  become: yes
  become_user: root

- name: Install dropbox python package
  ansible.builtin.pip:
    name: dropbox
  become: yes
  become_user: root

- name: Install requests python package
  ansible.builtin.pip:
    name: requests
  become: yes
  become_user: root

- name: Copy Python script to remote server
  ansible.builtin.copy:
    src:  "{{playbook_dir}}/files/dropbox_script.py"
    dest: "~/dropbox_script.py"
    mode: 0440
